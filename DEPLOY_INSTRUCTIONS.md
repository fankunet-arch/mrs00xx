# MRS ç‰©æ–™æ”¶å‘ç®¡ç†ç³»ç»Ÿ - éƒ¨ç½²è¯´æ˜

## ğŸ“‹ æ›´æ–°å†…å®¹

### 1. SKUç¼–è¾‘åŠŸèƒ½å®Œå–„
- âœ… ä¿®å¤`get_sku_by_id`å‡½æ•°,æ·»åŠ category_idå’Œnoteå­—æ®µ
- âœ… å¢å¼ºSKUç¼–ç é‡å¤æ£€æŸ¥(æ–°å¢å’Œç¼–è¾‘æ—¶)
- âœ… æ·»åŠ XSSé˜²æŠ¤(HTMLç¼–ç )
- âœ… å®Œå–„å‰ç«¯ç¼–è¾‘è¡¨å•
- âœ… åˆ›å»ºå®Œæ•´çš„SKUç®¡ç†é¡µé¢

### 2. ç™»å½•ç³»ç»Ÿ
- âœ… ç”¨æˆ·è®¤è¯å’Œä¼šè¯ç®¡ç†
- âœ… å®‰å…¨çš„å¯†ç å“ˆå¸Œ(Argon2ID)
- âœ… ä¼šè¯å®‰å…¨(HttpOnly, Secure, SameSite)
- âœ… æš´åŠ›ç ´è§£é˜²æŠ¤
- âœ… å®Œæ•´çš„å®¡è®¡æ—¥å¿—

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1: åˆ›å»ºæµ‹è¯•ç”¨æˆ·

è®¿é—®ä»¥ä¸‹URLåˆ›å»ºæµ‹è¯•ç”¨æˆ·:
```
http://your-domain/backend/create_test_user.php
```

**ç¤ºä¾‹æµ‹è¯•ç”¨æˆ·**:
- ç”¨æˆ·å: admin
- å¯†ç : Admin123!@#
- é‚®ç®±: admin@mrs.local
- æ˜¾ç¤ºåç§°: ç³»ç»Ÿç®¡ç†å‘˜

**âš ï¸ é‡è¦**: ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²åå¿…é¡»åˆ é™¤`create_test_user.php`æ–‡ä»¶!

### æ­¥éª¤2: æµ‹è¯•ç™»å½•

è®¿é—®ç™»å½•é¡µé¢:
```
http://your-domain/backend/login_view.php
```

ä½¿ç”¨åˆ›å»ºçš„æµ‹è¯•ç”¨æˆ·ç™»å½•ã€‚

### æ­¥éª¤3: æµ‹è¯•SKUç®¡ç†

ç™»å½•æˆåŠŸåä¼šè‡ªåŠ¨è·³è½¬åˆ°:
```
http://your-domain/backend/sku_management.html
```

æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½:
- [x] SKUåˆ—è¡¨åŠ è½½
- [x] æœç´¢åŠŸèƒ½
- [x] æ–°å¢SKU
- [x] ç¼–è¾‘SKU
- [x] åˆ é™¤SKU

### æ­¥éª¤4: æ¸…ç†æµ‹è¯•æ–‡ä»¶

ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰åˆ é™¤ä»¥ä¸‹æ–‡ä»¶:
```bash
rm /home/user/mrs00xx/backend/create_test_user.php
rm /home/user/mrs00xx/backend/test_db_connection.php
```

## ğŸ”’ å®‰å…¨é…ç½®

### 1. æ•°æ®åº“é…ç½®

ç¡®è®¤æ•°æ®åº“è¿æ¥ä¿¡æ¯æ­£ç¡®:
```php
// æ–‡ä»¶: app/mrs/config_mrs/env_mrs.php
DB_HOST: mhdlmskp2kpxguj.mysql.db
DB_NAME: mhdlmskp2kpxguj
DB_USER: mhdlmskp2kpxguj
DB_PASS: [å¯†ç å·²é…ç½®]
```

### 2. ä¼šè¯å®‰å…¨

ä¼šè¯é…ç½®å·²åœ¨ä»£ç ä¸­è®¾ç½®:
- HttpOnly: âœ… å·²å¯ç”¨
- Secure: âœ… HTTPSç¯å¢ƒè‡ªåŠ¨å¯ç”¨
- SameSite: âœ… Strictæ¨¡å¼
- è¶…æ—¶: âœ… 30åˆ†é’Ÿæ— æ´»åŠ¨

### 3. å¯†ç ç­–ç•¥

å»ºè®®ç”¨æˆ·å¯†ç ç¬¦åˆä»¥ä¸‹è¦æ±‚:
- æœ€å°‘8ä¸ªå­—ç¬¦
- åŒ…å«å¤§å°å†™å­—æ¯
- åŒ…å«æ•°å­—
- åŒ…å«ç‰¹æ®Šå­—ç¬¦

## ğŸ“ æ–°å¢æ–‡ä»¶æ¸…å•

### åç«¯æ–‡ä»¶
- `app/mrs/lib/mrs_lib.php` - æ·»åŠ ç”¨æˆ·è®¤è¯å‡½æ•°(354-593è¡Œ)
- `app/mrs/api/login_process.php` - ç™»å½•å¤„ç†
- `app/mrs/api/logout.php` - æ³¨é”€å¤„ç†
- `app/mrs/api/backend_save_sku.php` - ä¿®å¤SKUç¼–ç æ£€æŸ¥(47-56è¡Œ)

### å‰ç«¯æ–‡ä»¶
- `backend/login_view.php` - ç™»å½•é¡µé¢
- `backend/sku_management.html` - SKUç®¡ç†é¡µé¢(å®Œæ•´åŠŸèƒ½)
- `backend/create_test_user.php` - æµ‹è¯•ç”¨æˆ·åˆ›å»º(ç”Ÿäº§ç¯å¢ƒåˆ é™¤)
- `backend/test_db_connection.php` - æ•°æ®åº“æµ‹è¯•(ç”Ÿäº§ç¯å¢ƒåˆ é™¤)

### æ›´æ–°çš„æ–‡ä»¶
- `backend/index.html` - æ›´æ–°ç¼–è¾‘è¡¨å•
- `app/mrs/lib/mrs_lib.php` - æ·»åŠ ç”¨æˆ·è®¤è¯å‡½æ•°

## ğŸ§ª æµ‹è¯•æ£€æŸ¥æ¸…å•

### ç™»å½•åŠŸèƒ½
- [ ] æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç å¯ä»¥ç™»å½•
- [ ] é”™è¯¯çš„ç”¨æˆ·åæˆ–å¯†ç æ— æ³•ç™»å½•
- [ ] 5æ¬¡å¤±è´¥åè§¦å‘æš´åŠ›ç ´è§£é˜²æŠ¤
- [ ] ç™»å½•åä¼šè¯æ­£å¸¸
- [ ] 30åˆ†é’Ÿæ— æ´»åŠ¨è‡ªåŠ¨é€€å‡º
- [ ] æ³¨é”€åŠŸèƒ½æ­£å¸¸
- [ ] æ—¥å¿—è®°å½•æ­£å¸¸

### SKUç¼–è¾‘åŠŸèƒ½
- [ ] åˆ—è¡¨æ­£å¸¸åŠ è½½
- [ ] æœç´¢åŠŸèƒ½æ­£å¸¸
- [ ] æ–°å¢SKUæˆåŠŸ
- [ ] ç¼–è¾‘SKUæˆåŠŸ
- [ ] SKUç¼–ç é‡å¤æ£€æŸ¥æœ‰æ•ˆ
- [ ] åˆ é™¤SKUæˆåŠŸ
- [ ] è¡¨å•éªŒè¯æ­£å¸¸
- [ ] é”™è¯¯æ¶ˆæ¯æ˜¾ç¤ºæ­£ç¡®

## ğŸ“Š APIç«¯ç‚¹

### è®¤è¯ç›¸å…³
- `POST /dc_html/mrs/api.php?route=login_process` - ç™»å½•
- `GET /dc_html/mrs/api.php?route=logout` - æ³¨é”€

### SKUç®¡ç†
- `GET /dc_html/mrs/api.php?route=backend_skus` - è·å–SKUåˆ—è¡¨
- `GET /dc_html/mrs/api.php?route=backend_sku_detail&sku_id={id}` - è·å–SKUè¯¦æƒ…
- `POST /dc_html/mrs/api.php?route=backend_save_sku` - ä¿å­˜SKU
- `POST /dc_html/mrs/api.php?route=backend_delete_sku` - åˆ é™¤SKU

### å“ç±»ç®¡ç†
- `GET /dc_html/mrs/api.php?route=backend_categories` - è·å–å“ç±»åˆ—è¡¨

## âš ï¸ é‡è¦æé†’

1. **åˆ é™¤æµ‹è¯•æ–‡ä»¶**: ç”Ÿäº§ç¯å¢ƒå¿…é¡»åˆ é™¤`create_test_user.php`å’Œ`test_db_connection.php`
2. **HTTPS**: å¼ºçƒˆå»ºè®®ä½¿ç”¨HTTPSç¡®ä¿ä¼ è¾“å®‰å…¨
3. **å¯†ç ç­–ç•¥**: å»ºè®®å¼ºåˆ¶ç”¨æˆ·ä½¿ç”¨å¼ºå¯†ç 
4. **å¤‡ä»½æ•°æ®**: éƒ¨ç½²å‰å¤‡ä»½æ•°æ®åº“
5. **æ—¥å¿—ç›‘æ§**: å®šæœŸæ£€æŸ¥`logs/mrs/debug.log`

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜,è¯·æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶:
- é”™è¯¯æ—¥å¿—: `logs/mrs/error.log`
- è°ƒè¯•æ—¥å¿—: `logs/mrs/debug.log`

## ğŸ‰ å®Œæˆ

éƒ¨ç½²å®Œæˆå,ç³»ç»Ÿå³å¯æ­£å¸¸ä½¿ç”¨!
